---
description: プロジェクトのディレクトリ構造と各ディレクトリの役割
globs:
---

# プロジェクト構造

## ディレクトリ構造

```
src/
├── app/                  // Next.js App RouterページとUI層
│   ├── (auth)/           // ルートグループ
│   │   ├── login/
│   │   └── register/
│   ├── dashboard/
│   └── layout.tsx
│
├── features/             // ドメイン機能の実装
│   ├── auth/             // 認証機能
│   │   ├── api/
│   │   ├── components/
│   │   ├── hooks/
│   │   ├── types/
│   │   ├── utils/
│   │   └── index.ts
│   ├── users/
│   └── dashboard/
│
└── shared/               // 共有リソースとインフラストラクチャ
    ├── components/       // 共通UIコンポーネント
    │   ├── elements/
    │   ├── form/
    │   ├── layout/
    │   └── feedback/
    ├── config/           // アプリケーション設定
    ├── hooks/            // 共通フック
    ├── lib/              // 外部ライブラリのラッパー
    ├── providers/        // コンテキストプロバイダー
    ├── stores/           // グローバルステート
    ├── types/            // 共通型定義
    └── utils/            // ユーティリティ関数
```

## モジュール管理

### export 規則

**基本ルール:** コンポーネントは **`export default function`** を使用し、それ以外は **`export const`** を使用する

| エクスポート方法 | 対象 |
| --- | --- |
| **`export default function`** | コンポーネント |
| **`export const`** | ユーティリティ、型定義、定数、ヘルパー関数など |

### import 規則

コードの依存関係を明確にし、カプセル化を維持するため、以下のインポート規則に従う。

1. **機能の自己完結性**:
   - 各機能は独自のコンポーネント、API、フック、型を持ち、必要なものだけを`index.ts`で公開する
   - 機能内で非公開の実装詳細は外部から直接アクセスできない

2. **機能間のインポート**:
   - 他の機能からインポートする場合は必ず公開APIを通じて行う
   - 例: `import { useAuth } from '@/features/auth'`
   - 非公開実装への直接アクセスは禁止:  `import { login } from '@/features/auth/api/auth-service'`

## 依存関係の方向性

- `app/`は`features/`と`shared/`からインポートできる
- `features/`は`shared/`からインポートできるが、`app/`からはインポートできない
- `shared/`は他のどのディレクトリからもインポートできない（循環依存を防ぐため）

```mermaid
graph TD
    %% 大枠の定義
    subgraph Project
        subgraph shared["shared"]
            components["components"]
            hooks["hooks"]
            lib["lib"]
            types["types"]
            utils["utils"]
        end

        subgraph features["features"]
            comments["comments"]
            discussions["discussions"]
            teams["teams"]
        end

        subgraph application["application"]
            app["app"]
        end

        %% 依存関係の方向性（矢印はインポート元からインポート先へ）
        shared --> features
        shared --> application
        features --> application
    end
```