# フィルタリング UI の Sheet コンポーネント化実装計画

## 現状分析

- `LazyRecipeFilter` コンポーネントが現在埋め込み式で実装されている
- `RecipeFilter` 内部でモバイル用の開閉状態管理が既に実装済み
- `src/app/page.tsx` でモバイル用とデスクトップ用の2箇所で使用されている
- Sheetコンポーネントが `/src/client/shared/shadcn/sheet.tsx` で利用可能

## 実装方針

**常時Sheet方式採用**: モバイル・デスクトップ両方でSheet方式に統一し、シンプルで一貫したUXを実現

## 実装タスク

### 1. 新しいSheetベースのフィルターコンポーネント作成

- `RecipeFilterSheet.tsx` を新規作成
- Sheet, SheetTrigger, SheetContent, SheetHeader, SheetTitle を活用
- 既存の `RecipeFilter` のフィルター機能をそのまま活用
- 画面右側からスライドインする仕様で実装
- フィルターボタンにアクティブフィルター数を表示

### 2. LazyRecipeFilterの完全リプレース

- 既存のCard表示ロジックを削除
- Sheet方式のみをサポートする新しい実装
- モバイル・デスクトップ両方で同じUI体験を提供

### 3. page.tsx の更新

- モバイル・デスクトップ両方で統一されたSheet方式を使用
- 重複した表示ロジックを削除してシンプル化
- 1つのフィルターコンポーネントのみを配置

### 4. テスト実装

- 新しいコンポーネントのテストケース作成
- 既存テストの更新と動作確認

### 5. 品質チェック

- `npm run check-all` でリンティング・型チェック・テスト実行

## 技術的配慮

- **TDD**: テスト駆動開発でReactコンポーネントテストを優先実装
- **統一UI**: モバイル・デスクトップで一貫したSheet体験を提供
- **型安全性**: TypeScriptの厳密な型定義を維持
- **アクセシビリティ**: Sheet コンポーネントのARIA属性を適切に設定
- **UX向上**: フィルター状態の視認性とアクセス性を改善

## 実装の利点

### シンプル化

- Card/Sheet切り替えロジックが不要
- 1つのコンポーネントでの統一管理
- コードの保守性向上

### UX統一

- モバイル・デスクトップで同じ操作感覚
- 学習コストの削減
- 予測可能な動作

### 画面スペース効率

- メインコンテンツ領域の最大活用
- フィルター非使用時の画面スペース節約
- レシピカード表示領域の拡大

## 変更要求詳細

### 現状

- `LazyRecipeFilter` コンポーネントでフィルタリング欄を実装
- 現在の表示方式: 埋め込み

### 変更要求

`@src/client/shared/shadcn/sheet.tsx` を使用してフィルタリング欄を表示するよう修正

### 変更理由

- Card コンポーネントを効率的に配置するため

### 技術要件

#### 使用コンポーネント

- `@src/client/shared/shadcn/sheet.tsx` (Sheet本体)

#### 実装仕様

- **トリガー**: フィルターボタンクリックで開く
- **配置**: 画面右側からスライドイン
