---
name: system-design
description: システム設計とアーキテクチャ分析のガイドライン
user-invocable: false
---

# システム設計ガイドライン

## 設計原則

- **YAGNI**: 今必要な機能のみ実装
- **KISS**: シンプルな解決策を優先
- **SOLID**: 単一責任、オープンクローズド等
- **DRY**: 重複を避ける（ただし早すぎる抽象化は避ける）

## 思考プロセス

設計時、以下を自問する：

1. この機能の本質は何か？（手段ではなく目的）
2. 最もシンプルな解決策は？
3. 6ヶ月後も理解できるか？
4. テストはどう書くか？
5. 何が壊れる可能性があるか？

## 探索手法

### 類似実装の検索

- 同種の機能がどう実装されているか
- エラーハンドリング、バリデーションのパターン
- テストの書き方

### 依存関係の追跡

- import/export の関係
- 共有コンポーネント・ユーティリティの利用状況

## 設計判断の記録

選択肢がある場合、以下を明記：

```markdown
### 判断: [決定事項]

- **選択肢**:
  - A案: [概要] → メリット / デメリット
  - B案: [概要] → メリット / デメリット
- **決定**: A案
- **理由**: [根拠]
```

## ドキュメント形式

```markdown
# 設計: [機能名]

## 概要

[1-2文で目的]

## 前提条件・スコープ

- 対応する: ...
- 対応しない: ...

## 現状分析

[探索結果、関連コード（パス付き）、既存パターン]

## 設計判断

[選択肢、トレードオフ、決定理由]

## 実装計画

| #   | ファイル | 種別 | 内容 | 依存 |
| --- | -------- | ---- | ---- | ---- |
| 1   | src/...  | 新規 | ...  | -    |

## リスクと対策

[想定される問題と緩和策]

## 検証方法

[テスト方針]
```

## アーキテクチャ構造

```
src/server/
├── application/    # ユースケース、DTO
├── domain/         # エンティティ、リポジトリインターフェース
├── infrastructure/ # リポジトリ実装、外部サービス
├── features/       # 機能別コントローラー、サービス
└── shared/         # 共通ユーティリティ
```
