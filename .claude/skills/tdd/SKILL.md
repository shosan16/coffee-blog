---
name: tdd
description: t-wada方式のテスト駆動開発を実行します。新機能実装、バグ修正、リファクタリング時に使用。Red-Green-Refactorサイクルを対話的に進めます。
user-invocable: true
---

# TDD実装ワークフロー

t-wada の考え方に基づく Red-Green-Refactor サイクルで実装を進めます。

## 開始前

1. main ブランチにいることを確認（指定がない場合）
2. 既存コードを理解してから変更
3. 機能用ブランチを作成

## ノート機能

`notes/features/` フォルダに機能名と同じ名前のマークダウンファイルを作成。

- 質問への回答を記録
- 重要な決定事項をメモ
- セッション中断時の長期記憶として機能

## サイクル

### 1. テストリスト作成

実装すべきテストケースをリストアップ

### 2. Red（失敗するテスト）

- 新しい振る舞いを強制するテストを書く
- テストを実行し、失敗を確認
- この段階で本番コードは変更しない

### 3. Green（最小限の実装）

- テストをパスする最もシンプルなコードを書く
- この段階でテストは変更しない
- 全テスト通過後にコミット（pushはしない）

### 4. Refactor（必須・最重要）

- 4大原則（YAGNI・KISS・SOLID・DRY）に従い改善
- 命名の明確化、型安全性の強化
- パフォーマンス・エラーハンドリング強化
- テスト通過後にコミット

### 5. 繰り返し

上記 2〜4 を全テストケース完了まで繰り返す

## コミットメッセージ

- 1行目: 50文字以内の要約
- 2行目: 空行
- 本文: 72文字以内で折り返し
- Claude フッターは省略

## 完了時

- ブランチを GitHub に push
- プルリクエストを作成

## リファクタリング単独の場合

機能変更なしの純粋なリファクタリングを依頼された場合は、新しいテストを書かずに開始。
既存テストが通り続けることを確認しながら進める。
